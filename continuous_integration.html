
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Automating code quality assurance &#8212; Quality Assurance of Code for Analysis and Research</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/logo.css?v=1c56504a" />
    <link rel="stylesheet" type="text/css" href="_static/admonitions.css?v=1956eba1" />
    <link rel="stylesheet" type="text/css" href="_static/accessibility.css?v=6e02104c" />
    <link rel="stylesheet" type="text/css" href="_static/markdown_within_tabs.css?v=d7e1104e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'continuous_integration';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Learning resources" href="learning.html" />
    <link rel="prev" title="Testing code" href="testing_code.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/duck_book_logo.svg" class="logo__image only-light" alt="Quality Assurance of Code for Analysis and Research - Home"/>
    <script>document.write(`<img src="_static/duck_book_logo.svg" class="logo__image only-dark" alt="Quality Assurance of Code for Analysis and Research - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary of terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_guide.html">Managing analytical code development</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="checklists.html">Code quality assurance checklists</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="checklist_lower.html">Lower quality assurance</a></li>
<li class="toctree-l2"><a class="reference internal" href="checklist_moderate.html">Moderate quality assurance</a></li>
<li class="toctree-l2"><a class="reference internal" href="checklist_higher.html">Higher quality assurance</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Guidance</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="principles.html">Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="modular_code.html">Modular code</a></li>
<li class="toctree-l1"><a class="reference internal" href="readable_code.html">Readable code</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">Structuring your project</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_documentation.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_documentation.html">Project documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="version_control.html">Version control</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data management</a></li>
<li class="toctree-l1"><a class="reference internal" href="peer_review.html">Peer review</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing_code.html">Testing code</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Automating code quality assurance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="learning.html">Learning resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/best-practice-and-impact/qa-of-code-guidance" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/best-practice-and-impact/qa-of-code-guidance/edit/main/book/continuous_integration.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/best-practice-and-impact/qa-of-code-guidance/issues/new?title=Issue%20on%20page%20%2Fcontinuous_integration.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/continuous_integration.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Automating code quality assurance</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automate-tests-to-reduce-risk-of-errors">Automate tests to reduce risk of errors</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commit-small-changes-often">Commit small changes often</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-git-hooks-to-encourage-good-practice">Use Git hooks to encourage good practice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linters-and-formatters">Linters and formatters</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-use-cases-for-github-actions">Example use cases for GitHub Actions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-github-actions-to-automate-tests">Configure GitHub actions to automate tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-github-actions-to-build-and-deploy-documentation">Configure GitHub actions to build and deploy documentation</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-gitlab-pipeline">Example GitLab Pipeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensive-example-of-automating-code-quality-assurance">Comprehensive example of automating code quality assurance</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="automating-code-quality-assurance">
<h1>Automating code quality assurance<a class="headerlink" href="#automating-code-quality-assurance" title="Link to this heading">#</a></h1>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h2>
<p>You can automate various tasks to increase the quality of code and make development easier and less tedious.
Automating the running of unit tests is especially important to establish trust in your pipeline or package, by ensuring that all unit tests pass before every merge.</p>
<section id="automate-tests-to-reduce-risk-of-errors">
<span id="automate-tests"></span><h3>Automate tests to reduce risk of errors<a class="headerlink" href="#automate-tests-to-reduce-risk-of-errors" title="Link to this heading">#</a></h3>
<p>You should run tests whenever you make changes to your project.
This ensures that changes do not break the existing, intended functionality of your code.
However, it is easy to forget to run your tests at regular intervals.</p>
<p>“Surely I can automate this too?”</p>
<p>Absolutely! Automatic testing, amongst other quality assurance measures, can be triggered when you make changes to your remote version control repository.
You can use these tools to ensure that all changes to a project are tested.
Additionally, it allows others, who are reviewing your code, to see the results of your tests.</p>
</section>
</section>
<section id="commit-small-changes-often">
<span id="continuous-integration"></span><h2>Commit small changes often<a class="headerlink" href="#commit-small-changes-often" title="Link to this heading">#</a></h2>
<p>Committing small changes regularly is often referred to as Continuous Integration (CI).
You can achieve this easily through the use of <a class="reference internal" href="version_control.html"><span class="std std-doc">version control</span></a>, such as Git.</p>
<p>You should commit every time you make a working change.
Fixed a typo? Commit. Fixed a bug? Commit. Added a function? Commit. Added a test? Commit.
As a very rough guide, you should expect to commit a few times each hour and push your changes to your shared software repository at least once a day.
If the task is unfinished at the end of the day, you should consider if the task has been sufficiently broken down.</p>
<p>CI should be underpinned by automating routine code quality assurance tasks.
This quality assurance includes verifying that your code successfully builds or installs. It also ensures your <a class="reference internal" href="testing_code.html"><span class="std std-doc">code tests</span></a> run successfully.
You can achieve this in a number of ways such as use of Git hooks and workflows.</p>
</section>
<section id="use-git-hooks-to-encourage-good-practice">
<h2>Use Git hooks to encourage good practice<a class="headerlink" href="#use-git-hooks-to-encourage-good-practice" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://git-scm.com/docs/githooks">Git hooks</a> are scripts that can be set to run locally at specific points in your Git workflow,
such as pre-commit, pre-push, etc.
You can use them to automate code quality assurance tasks, e.g., run tests, follow style guides, or enforce commit standards.</p>
<p>For example, you could set up a <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> or <code class="docutils literal notranslate"><span class="pre">pre-push</span></code> hook that runs your tests before you make each commit or push to the remote repository.
This might stop your commit/push if the tests fail, so that you won’t push breaking changes to your remote repository.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your code is likely to be run on a range of software versions or operating systems, you can test on a variety of these.
Tools exist to support local testing of combination software versions and package dependency versions:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://tox.readthedocs.io/en/latest/">tox</a> or <a class="reference external" href="https://nox.thea.codes/en/stable/">nox</a> for Python</p></li>
<li><p><a class="reference external" href="https://r-hub.github.io/rhub/">rhub</a> for R</p></li>
</ul>
</div>
<section id="linters-and-formatters">
<span id="linters-formatters"></span><h3>Linters and formatters<a class="headerlink" href="#linters-and-formatters" title="Link to this heading">#</a></h3>
<p>Style guides are important for making sure your code is clear and readable and should form part of your quality assurance process.
However, as discussed in <a class="reference internal" href="readable_code.html#automate-style-checks"><span class="std std-ref">Automate style checks</span></a>, the process of checking and fixing code for style and formatting is tedious.
Automation can speed up this work, either by providing suggestions as you write the code or by reformatting your code to follow your chosen style.</p>
<p>Two main types of tool exist for these tasks:</p>
<ul class="simple">
<li><p>Linters - these analyse your code to flag stylistic errors (and sometimes bugs or security issues too).</p></li>
<li><p>Formatters - these not only detect when you have diverged from a style, but will automatically correct the formatting of your code to conform to a particular style.</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table" id="linters">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Packages that can be used for linting or formatting in Python and R</span><a class="headerlink" href="#linters" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Language</p></th>
<th class="head"><p>Linters</p></th>
<th class="head"><p>Formatters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Python</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">flake8</span></code>, <code class="docutils literal notranslate"><span class="pre">pylint</span></code>, <code class="docutils literal notranslate"><span class="pre">Bandit</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Black</span></code>, <code class="docutils literal notranslate"><span class="pre">Isort</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>R</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">lintr</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">formatR</span></code>, <code class="docutils literal notranslate"><span class="pre">styler</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Markdown</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pymarkdownlnt</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>You can use these tools locally (in the command line) or as git pre-commit hooks.
As described above, using pre-commit hooks allows you to run these automatically every time there are changes;
this can reduce the burden on developers and reviewers checking that code conforms to style guides.</p>
<p>Make sure you read the documentation for these tools before you use them to understand what they are checking or changing in your code.
You can configure some of them to ignore or detect specific types of formatting error.
You can also run multiples of the tools to catch a broader range of stylistic or programmatic errors.</p>
</section>
</section>
<section id="workflows">
<h2>Workflows<a class="headerlink" href="#workflows" title="Link to this heading">#</a></h2>
<p>GitHub Actions and GitLab Pipelines are both able to define custom workflows using YAML.
Workflow refers to a defined sequence of steps and actions that you need to perform
to complete a specific task or process.
Workflows are commonly used in software development to automate repetitive or complex tasks,
such as building and deploying software, testing code, and managing code reviews.
GitHub Actions and GitLab Pipelines both allow automated workflows that trigger
builds and tests whenever code changes are pushed to the repository.</p>
<section id="example-use-cases-for-github-actions">
<h3>Example use cases for GitHub Actions<a class="headerlink" href="#example-use-cases-for-github-actions" title="Link to this heading">#</a></h3>
<p>Here are some examples to support understanding of these ideas.</p>
<section id="configure-github-actions-to-automate-tests">
<h4>Configure GitHub actions to automate tests<a class="headerlink" href="#configure-github-actions-to-automate-tests" title="Link to this heading">#</a></h4>
<p>Here is an example configuration file, for use with GitHub actions.
The <code class="docutils literal notranslate"><span class="pre">YAML</span></code> file format, used below, is common to a number of other CI tools.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test python package</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">master</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>

<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3.8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.10</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.11</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python ${{ matrix.python-version }}</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.python-version }}</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">python -m pip install --upgrade pip</span>
<span class="w">        </span><span class="no">pip install pytest </span>
<span class="w">        </span><span class="no">pip install -r requirements.txt</span>
<span class="w">        </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test with pytest</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">pytest</span>
</pre></div>
</div>
<p>The first section of this example describes when we should run our workflow.
In this case, we’re running the CI workflow whenever code is <code class="docutils literal notranslate"><span class="pre">push</span></code>ed to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch or where any Pull Request is created.
In the case of Pull Requests, the results of the CI workflow will be report on the request’s page.
If any of the workflow stages fail, this can block the merge of these changes onto a more stable branch.
Subsequent commits to the source branch will trigger the CI workflow to run again.</p>
<p>Below <code class="docutils literal notranslate"><span class="pre">jobs</span></code>, we’re defining what tasks we would like to run when we trigger our workflow.
We define what operating system we would like to run our workflow on - the Linux operating system <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code> here.
The <code class="docutils literal notranslate"><span class="pre">matrix</span></code> section under <code class="docutils literal notranslate"><span class="pre">strategy</span></code> defines parameters for the workflow.
We will repeat the workflow for each combination of parameters supplied here - in this case 4 recent Python versions.</p>
<p>The individual stages of the workflow are defined under <code class="docutils literal notranslate"><span class="pre">steps</span></code>.
<code class="docutils literal notranslate"><span class="pre">steps</span></code> typically have an informative name and run code to perform an action.
Here <code class="docutils literal notranslate"><span class="pre">uses:</span> <span class="pre">actions/checkout&#64;v3</span></code> references <a class="reference external" href="https://github.com/actions/checkout">existing code</a> that will retrieve the code from our repo.
The subsequent <code class="docutils literal notranslate"><span class="pre">steps</span></code> will use this code.
The next step provides us with a specific Python version, as specified in the <code class="docutils literal notranslate"><span class="pre">matrix</span></code>.
Then we install dependencies/requirements for our code and the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module.
Finally, we run <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to check that our code is working as expected.</p>
<p>This workflow will report whether our test code ran successfully for each of the specified Python versions.</p>
</section>
<section id="configure-github-actions-to-build-and-deploy-documentation">
<h4>Configure GitHub actions to build and deploy documentation<a class="headerlink" href="#configure-github-actions-to-build-and-deploy-documentation" title="Link to this heading">#</a></h4>
<p>It is important to maintain the documentation relating to your project to ensure contributors and users can understand, maintain, and use your product correctly.
One basic way of doing this is maintaining markdown files within a GitHub repository.
However, multiple tools exist that can transform these markdown files into HTML content.
A popular tool for building and deploying HTML documentation is <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>.
Here are two examples of repositories that use sphinx to build its documentation:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/best-practice-and-impact/qa-of-code-guidance/blob/main/.github/workflows/book.yaml">Quality assurance of code for analysis and research (this book)</a></p></li>
<li><p><a class="reference external" href="https://github.com/best-practice-and-impact/govcookiecutter/blob/main/.github/workflows/govcookiecutter-deploy-documentation.yml">govcookiecutter</a></p></li>
</ul>
</section>
</section>
<section id="example-gitlab-pipeline">
<h3>Example GitLab Pipeline<a class="headerlink" href="#example-gitlab-pipeline" title="Link to this heading">#</a></h3>
<p>GitLab has an equivalent to GitHub Actions called GitLab Pipelines.
The use cases for these are practically the same, with a change in syntax and file structure.
<a class="reference external" href="https://web.archive.org/web/20230321180431/https://www.patricksoftwareblog.com/setting-up-gitlab-ci-for-a-python-application/">PATRICK’S SOFTWARE BLOG</a> provides a simple GitLab
pipeline example and detailed description on how to use it.
For further details <a class="reference external" href="https://docs.gitlab.com/ee/ci/">GitLab provides documentation on how to create and use GitLab Pipelines</a>.</p>
</section>
<section id="comprehensive-example-of-automating-code-quality-assurance">
<h3>Comprehensive example of automating code quality assurance<a class="headerlink" href="#comprehensive-example-of-automating-code-quality-assurance" title="Link to this heading">#</a></h3>
<p>You can see a detailed example of CI in practice in the <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code> project.
A recent version of the
<a class="reference external" href="https://github.com/executablebooks/jupyter-book/blob/6fb0cbe4abb5bc29e9081afbe24f71d864b40475/.github/workflows/tests.yml"><code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code> CI workflow</a> includes:</p>
<ul class="simple">
<li><p>Checking code against style guidelines, using <a class="reference external" href="https://pre-commit.com/">pre-commit</a>.</p></li>
<li><p>Running code tests over:</p>
<ul>
<li><p>a range of Python versions.</p></li>
<li><p>multiple versions of specific dependencies (<code class="docutils literal notranslate"><span class="pre">sphinx</span></code> here).</p></li>
<li><p>multiple operating systems.</p></li>
</ul>
</li>
<li><p>Reporting test coverage.</p></li>
<li><p>Checking that documentation builds successfully.</p></li>
<li><p>Deploying a new version of the <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code> package to <a class="reference external" href="https://pypi.org/">the python package index (PyPI)</a>.</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="testing_code.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Testing code</p>
      </div>
    </a>
    <a class="right-next"
       href="learning.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Learning resources</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automate-tests-to-reduce-risk-of-errors">Automate tests to reduce risk of errors</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commit-small-changes-often">Commit small changes often</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-git-hooks-to-encourage-good-practice">Use Git hooks to encourage good practice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linters-and-formatters">Linters and formatters</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-use-cases-for-github-actions">Example use cases for GitHub Actions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-github-actions-to-automate-tests">Configure GitHub actions to automate tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-github-actions-to-build-and-deploy-documentation">Configure GitHub actions to build and deploy documentation</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-gitlab-pipeline">Example GitLab Pipeline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensive-example-of-automating-code-quality-assurance">Comprehensive example of automating code quality assurance</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>Analysis Function - Analytical Standards and Pipelines hub</p><p>This is a living document, please help use to make it grow by providing any feedback <a href='mailto:ASAP@ons.gov.uk'>by email</a> or via the <a href='https://github.com/best-practice-and-impact/qa-of-code-guidance'>GitHub repository</a>.
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>